#!/bin/sh

# create a location to store downloaded data
mkdir -p @PROJECT_BINARY_DIR@/pyplusplus
cd @PROJECT_BINARY_DIR@/pyplusplus

# get sources
curl --location-trusted https://downloads.sourceforge.net/project/ompl/dependencies/gccxml-2012-05-17.tgz | tar xzf -
curl --location-trusted https://downloads.sourceforge.net/project/ompl/dependencies/pygccxml-r1856.tgz | tar xzf -
curl --location-trusted https://downloads.sourceforge.net/project/ompl/dependencies/pyplusplus-r1856.tgz | tar xzf -

# build & install gccxml
cd gccxml
@CMAKE_COMMAND@ @CMAKE_GCCXML_ARGS@ .
@CMAKE_COMMAND@ --build .
sudo @CMAKE_COMMAND@ --build . --target install

# build & install pygccxml and Py++
cd ../pygccxml
@PYTHON_EXEC@ setup.py build
sudo @PYTHON_EXEC@ setup.py install
cd ../pyplusplus
@PYTHON_EXEC@ setup.py build
sudo @PYTHON_EXEC@ setup.py install
